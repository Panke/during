<!DOCTYPE html>
<html>
<head>
        <title>SetupFlags (during.io_uring.SetupFlags)</title>
	<meta charset="utf-8" />
	<meta content="width=device-width, initial-scale=1" name="viewport" />
        <link href="style.css" rel="stylesheet" />
        <script src="script.js" type="text/javascript"></script>

	
	<link href="search-results.html" rel="prefetch" />
</head>
<body>
	<div id="page-header">
		<div id="logotype">
		<span>Documentation</span>
		<nav>
			<a href="http://dlang.org/">Dlang.org</a>
		</nav>
		</div>

		<form action="search-docs.html" id="search">
			<input name="searchTerm" placeholder="Find a symbol name..." type="search" />
			<input type="submit" value="Go" />
		</form>
	</div>
	<div id="page-body">
		<div id="page-content">
		<h1>SetupFlags</h1><div class="breadcrumbs"><a class="breadcrumb" href="during.html">during</a><a class="breadcrumb" href="during.io_uring.html">io_uring</a></div><div><div class="documentation-comment synopsis"><div><p><tt class="inline-code">io_uring_setup()</tt> flags</p></div></div></div><div class="annotated-prototype"></div><h2 id="values"><a class="header-anchor" href="#values">Values</a></h2><table class="enum-members"><tr><th>Value</th><th>Meaning</th></tr><tr class="enum-member" id="NONE"><td><a class="enum-member-name" href="#NONE">NONE</a><span class="enum-member-value"><tt class="highlighted"><span class="num">0</span></tt></span><div class="enum-attributes"></div></td><td><div><p>No flags set</p></div></td></tr><tr class="enum-member" id="IOPOLL"><td><a class="enum-member-name" href="#IOPOLL">IOPOLL</a><span class="enum-member-value"><tt class="highlighted"><span class="num">1U</span> &lt;&lt; <span class="num">0</span></tt></span><div class="enum-attributes"></div></td><td><div><p><tt class="inline-code">IORING_SETUP_IOPOLL</tt></p><p>Perform busy-waiting for an I/O completion, as opposed to getting notifications via an
asynchronous IRQ (Interrupt Request).  The file system (if any) and block device must
support polling in order for  this  to  work. Busy-waiting  provides  lower latency, but may
consume more CPU resources than interrupt driven I/O.  Currently, this feature is usable
only on a file descriptor opened using the O_DIRECT flag.  When a read or write is submitted
to a polled context, the application must poll for completions on the CQ ring by calling
io_uring_enter(2).  It is illegal to mix and match polled and non-polled I/O on an io_uring
instance.</p></div></td></tr><tr class="enum-member" id="SQPOLL"><td><a class="enum-member-name" href="#SQPOLL">SQPOLL</a><span class="enum-member-value"><tt class="highlighted"><span class="num">1U</span> &lt;&lt; <span class="num">1</span></tt></span><div class="enum-attributes"></div></td><td><div><p><tt class="inline-code">IORING_SETUP_SQPOLL</tt></p><p>When this flag is specified, a kernel thread is created to perform submission queue polling.
An io_uring instance configured in this way enables an application to issue I/O without ever
context switching into the kernel.
By using the submission queue to fill in new submission queue entries and watching for
completions on the completion queue, the application can submit and reap I/Os without doing
a single system call.
If the kernel thread is idle for more than sq_thread_idle microseconds, it will set the
IORING_SQ_NEED_WAKEUP bit in the flags field of the struct io_sq_ring. When this happens,
the application must call io_uring_enter(2) to wake the kernel thread. If I/O is kept busy,
the kernel thread will never sleep. An application making use of this feature will need to
guard the io_uring_enter(2) call with  the  following  code sequence:</p><pre class="block-code" data-language="`">// Ensure that the wakeup flag is read after the tail pointer has been written.
smp_mb();
if (*sq_ring-&gt;flags &amp; IORING_SQ_NEED_WAKEUP)
    io_uring_enter(fd, 0, 0, IORING_ENTER_SQ_WAKEUP);</pre><p>where sq_ring is a submission queue ring setup using the struct io_sqring_offsets described below.</p><p>To  successfully  use this feature, the application must register a set of files to be used for
IO through io_uring_register(2) using the IORING_REGISTER_FILES opcode. Failure to do so will
result in submitted IO being errored with EBADF.</p></div></td></tr><tr class="enum-member" id="SQ_AFF"><td><a class="enum-member-name" href="#SQ_AFF">SQ_AFF</a><span class="enum-member-value"><tt class="highlighted"><span class="num">1U</span> &lt;&lt; <span class="num">2</span></tt></span><div class="enum-attributes"></div></td><td><div><p><tt class="inline-code">IORING_SETUP_SQ_AFF</tt></p><p>If this flag is specified, then the poll thread will be bound to the cpu set in the
sq_thread_cpu field of the struct io_uring_params.  This flag is only meaningful when
IORING_SETUP_SQPOLL is specified.</p></div></td></tr><tr class="enum-member" id="CQSIZE"><td><a class="enum-member-name" href="#CQSIZE">CQSIZE</a><span class="enum-member-value"><tt class="highlighted"><span class="num">1U</span> &lt;&lt; <span class="num">3</span></tt></span><div class="enum-attributes"></div></td><td><div><p><tt class="inline-code">IORING_SETUP_CQSIZE</tt></p><p>Create the completion queue with struct io_uring_params.cq_entries entries.  The value must
be greater than entries, and may be rounded up to the next power-of-two.</p><p>Note: Available from Linux 5.5</p></div></td></tr></table><div><h2 id="meta"><a class="header-anchor" href="#meta">Meta</a></h2><div class="documentation-comment source-section other-section"><h3 id="source"><a class="header-anchor" href="#source">Source</a></h3><div><p><a href="source/during.io_uring.d.html#L287">See Implementation</a><br /></p></div></div></div></div>
		<div id="page-nav"><a class="parent" href="during.html">during</a><a class="parent" href="during.io_uring.html">io_uring</a>
		<span class="type-separator">enums</span><ul><li><a class="enum" href="during.io_uring.EnterFlags.html">EnterFlags</a></li><li><a class="enum" href="during.io_uring.Operation.html">Operation</a></li><li><a class="enum" href="during.io_uring.PollEvents.html">PollEvents</a></li><li><a class="enum" href="during.io_uring.RegisterOpCode.html">RegisterOpCode</a></li><li><a class="enum" href="during.io_uring.SetupFeatures.html">SetupFeatures</a></li><li><a class="enum current" href="during.io_uring.SetupFlags.html">SetupFlags</a></li><li><a class="enum" href="during.io_uring.SubmissionEntryFlags.html">SubmissionEntryFlags</a></li><li><a class="enum" href="during.io_uring.TimeoutFlags.html">TimeoutFlags</a></li></ul><span class="type-separator">functions</span><ul><li><a class="function" href="during.io_uring.io_uring_enter.html">io_uring_enter</a></li><li><a class="function" href="during.io_uring.io_uring_register.html">io_uring_register</a></li><li><a class="function" href="during.io_uring.io_uring_setup.html">io_uring_setup</a></li></ul><span class="type-separator">structs</span><ul><li><a class="struct" href="during.io_uring.CompletionEntry.html">CompletionEntry</a></li><li><a class="struct" href="during.io_uring.CompletionQueueRingOffsets.html">CompletionQueueRingOffsets</a></li><li><a class="struct" href="during.io_uring.SetupParameters.html">SetupParameters</a></li><li><a class="struct" href="during.io_uring.SubmissionEntry.html">SubmissionEntry</a></li><li><a class="struct" href="during.io_uring.SubmissionQueueRingOffsets.html">SubmissionQueueRingOffsets</a></li></ul></div>
	</div>
	<div id="page-footer">Page generated by <a href="https://github.com/adamdruppe/adrdox">adrdox</a></div>
</body>
</html>